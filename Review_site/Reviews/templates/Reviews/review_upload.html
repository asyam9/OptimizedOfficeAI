{% extends "Reviews/base_with_nav.html" %}
{% load widget_tweaks %}

<!--웹 페이지 이름-->
{% block title %} 
  {% if review %}
    리뷰 수정 | Ol'reviews
  {% else %}
    리뷰 작성 | Ol'reviews
  {% endif %}
{% endblock title %}

<!--내비게이션 바-->
{% block nav %}
<li class="nav-item">
    <a class="nav-link" aria-current="page" href={% url "index" %}>리뷰 조회</a>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href={% url "upload" %}>리뷰 입력</a>
  </li>
{% endblock nav %}

<!--리뷰 입력 폼-->
{% block content %}
<div class="container" style='width: 50%; margin-top:100px'>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <h5>리뷰 작성하기</h5>
        (* 표시 필수 입력)
        <hr>

        <table class="table">
            <tbody>
              <tr>
                <th scope="row">제목*</th>
                <td>{{ form.title|add_class:"form-control"|attr:"id:floatingInput"|attr:"placeholder: 최대 30글자까지 입력 가능" }}</td>
              </tr>
              <tr>
                <th scope="row">별점*</th>
                <td> {{ form.ratings |add_class:"form-select"|attr:"id:floatingSelect"|attr:"aria-label:Floating label select example" }} </td>
              </tr>
              <tr>
                <th scope="row">내용*</th>
                <td>  {{ form.content|add_class:"form-control"|attr:"id:floatingTextarea2"|attr:"placeholder:리뷰 내용을 작성하세요"|attr:"style:height: 150px" }}  </td>
              </tr>
              <tr>
                <th scope="row">리뷰 사진*</th>
                <td>  {{ form.imgfile|add_class:"form-control"|attr:"id:formFile" }} ※ 업로드 가능한 이미지 확장자: .jpg / .png / .jpeg  </td>
              </tr>
            </tbody>
          </table>
          <!--에러 발생 시 경고창 띄우기-->
          {% if form.errors %}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
              {% for field, errors in form.errors.items %}
                {% for error in errors %}
                  {{ error }}
                {% endfor %}
              {% endfor %}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endif %}
          <div class="d-grid gap-2 col-6 mx-auto" style='float: left; width: 400px;'>
            <button type="submit" class="btn btn-outline-success">제출</button>
          </div>
    </form>
    <!--버튼 구현-->
    <div class="d-grid gap-2 col-6 mx-auto" style='float: left; padding: 0 30px;'>
      {% if review %}
        <a href={% url "detail" review.id %}>
      {% else %}
        <a href={% url "index" %}>
      {% endif %}
        <button type="submit" class="btn btn-outline-secondary" style="width: 400px;">취소</button>
      </a>
    </div>
</div>

{% endblock content %}